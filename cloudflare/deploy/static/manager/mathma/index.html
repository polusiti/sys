<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¢ Math Manager - ã‚·ãƒ³ãƒ—ãƒ«çµ±ä¸€ç‰ˆ</title>
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #1e40af;
            --accent-color: #60a5fa;
            --bg-color: #eff6ff;
            --text-color: #1f2937;
            --border-color: #bfdbfe;
            --hover-bg: #dbeafe;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        .header h1 {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .header p {
            font-size: 1.2rem;
            color: #6b7280;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .module-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            display: block;
            cursor: pointer;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .module-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .module-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .module-description {
            color: #6b7280;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .module-features {
            list-style: none;
        }

        .module-features li {
            padding: 5px 0;
            color: #6b7280;
            font-size: 0.9rem;
        }

        .module-features li:before {
            content: "âœ“ ";
            color: var(--primary-color);
            font-weight: bold;
        }

        /* ã‚·ãƒ³ãƒ—ãƒ«çµ±ä¸€ã‚«ãƒ©ãƒ¼ */
        .math .module-icon,
        .math .module-title { color: #3b82f6; }
        
        .creator .module-icon,
        .creator .module-title { color: #10b981; }
        
        .manager .module-icon,
        .manager .module-title { color: #f59e0b; }
        
        .practice .module-icon,
        .practice .module-title { color: #ec4899; }

        .stats-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-top: 40px;
        }

        .sample-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }

        .sample-content h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .btn-sample {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            margin: 15px 10px;
            transition: all 0.3s ease;
        }

        .btn-sample:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .sample-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9rem;
            display: none;
        }

        .sample-message.success {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #bfdbfe;
            display: block;
        }

        .sample-message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            color: #6b7280;
            margin-top: 5px;
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            color: #6b7280;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* PWAæº–å‚™ */
        .pwa-info {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .pwa-info h3 {
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .btn-sample {
                display: block;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¢ Math Manager</h1>
            <p>æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - ã‚·ãƒ³ãƒ—ãƒ«çµ±ä¸€æ–¹å¼</p>
        </div>

        <div class="pwa-info">
            <h3>ğŸ“± ã‚·ãƒ³ãƒ—ãƒ«ãƒ»çµ±ä¸€ãƒ»åŠ¹ç‡çš„</h3>
            <p>è¤‡é›‘ãªåˆ†é‡åˆ†ã‘ãªã— | A1æŠãƒ»F1è‡ªç”±ãƒ»F2è¨˜è¿° | å”åƒå•é¡Œä½œæˆ</p>
        </div>

        <div class="modules-grid">
            <a href="math/" class="module-card math">
                <div class="module-icon">ğŸ“</div>
                <h2 class="module-title">æ•°å­¦å•é¡Œ</h2>
                <p class="module-description">ã™ã¹ã¦ã®æ•°å­¦å•é¡Œã‚’çµ±ä¸€ã—ã¦ç®¡ç†ã™ã‚‹å˜ä¸€ã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>ä»£æ•°ãƒ»é–¢æ•°ãƒ»å›³å½¢ãƒ»ç¢ºç‡ãƒ»çµ±è¨ˆ</li>
                    <li>åŸºç¤ã‹ã‚‰ç™ºå±•ã¾ã§å…¨ãƒ¬ãƒ™ãƒ«å¯¾å¿œ</li>
                    <li>A1æŠãƒ»F1è‡ªç”±ãƒ»F2è¨˜è¿°å½¢å¼</li>
                    <li>åˆ†é‡ã«ã“ã ã‚ã‚‰ãªã„æŸ”è»Ÿç®¡ç†</li>
                    <li>ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãªæ“ä½œ</li>
                </ul>
            </a>

            <a href="creator/" class="module-card creator">
                <div class="module-icon">âœ¨</div>
                <h2 class="module-title">å•é¡Œä½œæˆ</h2>
                <p class="module-description">å”åƒå•é¡Œä½œæˆã‚·ã‚¹ãƒ†ãƒ  - ç°¡æ½”ã§åŠ¹ç‡çš„</p>
                <ul class="module-features">
                    <li>A1æŠãƒ»F1è‡ªç”±ãƒ»F2è¨˜è¿°å¯¾å¿œ</li>
                    <li>æ•°å¼å…¥åŠ›ï¼ˆLaTeXå¯¾å¿œæº–å‚™ï¼‰</li>
                    <li>3äººæ‰¿èªã‚·ã‚¹ãƒ†ãƒ </li>
                    <li>è©•ä¾¡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½</li>
                    <li>é›£æ˜“åº¦è¨­å®šï¼ˆæ˜“ãƒ»ä¸­ãƒ»é›£ï¼‰</li>
                </ul>
            </a>

            <a href="manager/" class="module-card manager">
                <div class="module-icon">ğŸ“‹</div>
                <h2 class="module-title">å•é¡Œç®¡ç†</h2>
                <p class="module-description">çµ±åˆå•é¡Œç®¡ç†ãƒ»çµ±è¨ˆã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>å…¨å•é¡Œä¸€è¦§ãƒ»æ¤œç´¢æ©Ÿèƒ½</li>
                    <li>æ­£ç­”ç‡ãƒ»è©•ä¾¡çµ±è¨ˆ</li>
                    <li>æ‰¿èªçŠ¶æ³ã®ç®¡ç†</li>
                    <li>å“è³ªç®¡ç†ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
                    <li>æ•™è‚²åˆ©ç”¨é™å®šã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</li>
                </ul>
            </a>

            <a href="practice/" class="module-card practice">
                <div class="module-icon">ğŸ¯</div>
                <h2 class="module-title">å•é¡Œç·´ç¿’</h2>
                <p class="module-description">å®Ÿéš›ã«æ•°å­¦å•é¡Œã‚’è§£ã„ã¦å­¦ç¿’ä½“é¨“</p>
                <ul class="module-features">
                    <li>ãƒ©ãƒ³ãƒ€ãƒ å‡ºé¡Œã‚·ã‚¹ãƒ†ãƒ </li>
                    <li>é›£æ˜“åº¦åˆ¥ç·´ç¿’ãƒ¢ãƒ¼ãƒ‰</li>
                    <li>å³æ™‚æ¡ç‚¹ãƒ»è§£èª¬è¡¨ç¤º</li>
                    <li>å­¦ç¿’é€²æ—ã®è¨˜éŒ²</li>
                    <li>å¼±ç‚¹åˆ†é‡ã®è‡ªå‹•æŠ½å‡º</li>
                </ul>
            </a>
        </div>

        <div class="stats-section">
            <h3 style="text-align: center; margin-bottom: 30px; color: var(--primary-color);">ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalQuestions">0</div>
                    <div class="stat-label">ç·å•é¡Œæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">1</div>
                    <div class="stat-label">çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ </div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">3</div>
                    <div class="stat-label">å•é¡Œå½¢å¼</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">3+</div>
                    <div class="stat-label">æ‰¿èªã‚·ã‚¹ãƒ†ãƒ </div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">âˆ</div>
                    <div class="stat-label">æ•°å­¦é ˜åŸŸ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">âœ“</div>
                    <div class="stat-label">PWAå¯¾å¿œ</div>
                </div>
            </div>
        </div>

        <div class="sample-section">
            <div class="sample-content">
                <h3>ğŸ² ã‚µãƒ³ãƒ—ãƒ«æ•°å­¦å•é¡Œ</h3>
                <p>æ§˜ã€…ãªæ•°å­¦é ˜åŸŸã®ã‚µãƒ³ãƒ—ãƒ«å•é¡Œã‚’èª­ã¿è¾¼ã‚“ã§ã€çµ±ä¸€ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½“é¨“ã§ãã¾ã™ã€‚</p>
                <div>
                    <button class="btn-sample" onclick="loadSampleData()">ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«å•é¡Œèª­ã¿è¾¼ã¿</button>
                    <button class="btn-sample btn-secondary" onclick="clearAllData()">ğŸ—‘ï¸ å…¨å•é¡Œå‰Šé™¤</button>
                    <button class="btn-sample" onclick="exportData()">ğŸ“¤ å•é¡Œã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                </div>
                <div id="sample-message" class="sample-message"></div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2024 Math Manager - ã‚·ãƒ³ãƒ—ãƒ«çµ±ä¸€æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ . PWA Ready.</p>
        </div>
    </div>

    <script>
        // ã‚·ãƒ³ãƒ—ãƒ«æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ©ã‚¹
        class SimpleMathManager {
            constructor() {
                this.init();
            }

            init() {
                this.updateStats();
                this.showWelcomeMessage();
            }

            // çµ±è¨ˆæƒ…å ±ã®æ›´æ–°
            updateStats() {
                const questions = JSON.parse(localStorage.getItem('mathQuestions') || '[]');
                document.getElementById('totalQuestions').textContent = questions.length;
            }

            // é€šçŸ¥è¡¨ç¤º
            showNotification(message, duration = 3000) {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, duration);
            }

            // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            showWelcomeMessage() {
                setTimeout(() => {
                    this.showNotification('ğŸ”¢ ã‚·ãƒ³ãƒ—ãƒ« Math Manager ã¸ã‚ˆã†ã“ãï¼');
                }, 1000);
            }

            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
            showMessage(message, type) {
                const messageElement = document.getElementById('sample-message');
                messageElement.textContent = message;
                messageElement.className = `sample-message ${type}`;
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–¢æ•°
        function loadSampleData() {
            try {
                const sampleData = [
                    {
                        id: 'math_001',
                        type: 'A1',
                        title: 'äºŒæ¬¡æ–¹ç¨‹å¼ã®è§£',
                        question: 'xÂ² - 5x + 6 = 0 ã®è§£ã¯ï¼Ÿ',
                        choices: ['x = 1, 6', 'x = 2, 3', 'x = -2, -3', 'x = -1, -6'],
                        correct: 1,
                        difficulty: 'ä¸­',
                        category: 'ä»£æ•°',
                        explanation: 'å› æ•°åˆ†è§£ã™ã‚‹ã¨ (x-2)(x-3) = 0 ã‚ˆã‚Š x = 2, 3',
                        created: new Date().toISOString(),
                        approvals: 3,
                        rating: 4.2
                    },
                    {
                        id: 'math_002',
                        type: 'F1',
                        title: 'ä¸‰è§’é–¢æ•°ã®å€¤',
                        question: 'sin 60Â° ã®å€¤ã‚’æ±‚ã‚ãªã•ã„ã€‚',
                        answer: 'âˆš3/2',
                        difficulty: 'æ˜“',
                        category: 'ä¸‰è§’é–¢æ•°',
                        explanation: 'ç‰¹åˆ¥è§’ã®å€¤ã¨ã—ã¦è¦šãˆã‚‹åŸºæœ¬å€¤',
                        created: new Date().toISOString(),
                        approvals: 4,
                        rating: 4.0
                    },
                    {
                        id: 'math_003',
                        type: 'F2',
                        title: 'æ¥µé™ã®è¨ˆç®—',
                        question: 'lim(xâ†’0) sin x / x ã‚’æ±‚ã‚ã‚ˆã€‚',
                        answer: '1',
                        difficulty: 'é›£',
                        category: 'å¾®åˆ†',
                        explanation: 'ãƒ­ãƒ”ã‚¿ãƒ«ã®å®šç†ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã€æ¨™æº–çš„ãªæ¥µé™ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹å€¤',
                        created: new Date().toISOString(),
                        approvals: 5,
                        rating: 3.8
                    },
                    {
                        id: 'math_004',
                        type: 'A1',
                        title: 'ç¢ºç‡ã®åŸºæœ¬',
                        question: 'ã‚³ã‚¤ãƒ³ã‚’3å›æŠ•ã’ã¦ã€ã™ã¹ã¦è¡¨ãŒå‡ºã‚‹ç¢ºç‡ã¯ï¼Ÿ',
                        choices: ['1/2', '1/4', '1/8', '1/16'],
                        correct: 2,
                        difficulty: 'æ˜“',
                        category: 'ç¢ºç‡',
                        explanation: '(1/2)Â³ = 1/8',
                        created: new Date().toISOString(),
                        approvals: 3,
                        rating: 4.5
                    },
                    {
                        id: 'math_005',
                        type: 'F1',
                        title: 'å¾®åˆ†ã®è¨ˆç®—',
                        question: 'f(x) = xÂ³ + 2xÂ² - x + 1 ã®å°é–¢æ•°ã‚’æ±‚ã‚ãªã•ã„ã€‚',
                        answer: 'f\'(x) = 3xÂ² + 4x - 1',
                        difficulty: 'ä¸­',
                        category: 'å¾®åˆ†',
                        explanation: 'å„é …ã‚’ã¹ãä¹—ã®å…¬å¼ã§å¾®åˆ†ã™ã‚‹',
                        created: new Date().toISOString(),
                        approvals: 4,
                        rating: 4.1
                    }
                ];

                // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                localStorage.setItem('mathQuestions', JSON.stringify(sampleData));

                window.mathManager.updateStats();
                window.mathManager.showMessage(
                    'âœ… ã‚µãƒ³ãƒ—ãƒ«æ•°å­¦å•é¡Œã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼ä»£æ•°ãƒ»ä¸‰è§’é–¢æ•°ãƒ»å¾®åˆ†ãƒ»ç¢ºç‡ åˆè¨ˆ5å•',
                    'success'
                );
                window.mathManager.showNotification('ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†');

            } catch (error) {
                window.mathManager.showMessage('âŒ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
            }
        }

        // å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
        function clearAllData() {
            if (confirm('ã™ã¹ã¦ã®æ•°å­¦å•é¡Œã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                localStorage.removeItem('mathQuestions');
                
                window.mathManager.updateStats();
                window.mathManager.showMessage('ğŸ—‘ï¸ ã™ã¹ã¦ã®å•é¡Œã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚', 'success');
                window.mathManager.showNotification('å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢å®Œäº†');
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆåˆ¶é™ä»˜ãï¼‰
        function exportData() {
            try {
                const questions = JSON.parse(localStorage.getItem('mathQuestions') || '[]');
                
                if (questions.length === 0) {
                    window.mathManager.showMessage('ğŸ“ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“ã€‚', 'error');
                    return;
                }

                // æ‰¿èªæ¸ˆã¿å•é¡Œã®ã¿ã€å€‹äººæƒ…å ±å‰Šé™¤
                const approvedQuestions = questions
                    .filter(q => q.approvals >= 3)
                    .map(q => ({
                        id: q.id,
                        type: q.type,
                        title: q.title,
                        question: q.question,
                        difficulty: q.difficulty,
                        category: q.category,
                        rating: q.rating
                    }));

                const exportData = {
                    exported: new Date().toISOString(),
                    version: '1.0-simple',
                    system: 'unified_math',
                    restriction: 'educational_use_only',
                    total: approvedQuestions.length,
                    questions: approvedQuestions
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], {
                    type: 'application/json'
                });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `simple-math-questions-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                window.mathManager.showMessage(
                    `ğŸ“¤ æ‰¿èªæ¸ˆã¿å•é¡Œ${approvedQuestions.length}å•ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼ˆæ•™è‚²åˆ©ç”¨é™å®šï¼‰`, 
                    'success'
                );

            } catch (error) {
                window.mathManager.showMessage('âŒ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
            }
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            window.mathManager = new SimpleMathManager();
        });
    </script>
</body>
</html>