# 🚀 AutoRAG + DeepSeek 英作文添削 Worker
# Cloudflare AI Search (AutoRAG) と DeepSeek API 連携設定

name = "autorag-deepseek-worker"
main = "autorag-deepseek-worker.js"
compatibility_date = "2024-09-01"

# 🎯 環境変数設定
[vars]
ACCOUNT_ID = "ba21c5b4812c8151fe16474a782a12d8"
RAG_ID = "rough-bread-ff9e11"
VECTOR_DB_NAME = "ai-search-rough-bread-ff9e11"

# 🤖 Workers AI バインディング (AutoRAG使用に必須)
[ai]
binding = "AI"

# 📚 KVネームスペース (キャッシュ用、任意)
[[kv_namespaces]]
binding = "GRAMMAR_CACHE"
id = "your-kv-namespace-id-here"
preview_id = "your-kv-preview-id-here"

# 🗄️ D1データベース (添削履歴保存用、任意)
[[d1_databases]]
binding = "GRAMMAR_DB"
database_name = "grammar-correction-db"
database_id = "your-d1-database-id-here"

# 🌐 本番環境設定
[env.production]
name = "autorag-deepseek-production"

# 本番環境用 KV/D1 設定
[[env.production.kv_namespaces]]
binding = "GRAMMAR_CACHE"
id = "your-production-kv-id-here"

[[env.production.d1_databases]]
binding = "GRAMMAR_DB"
database_name = "grammar-correction-db-prod"
database_id = "your-production-d1-id-here"

# 🚀 カスタムドメイン設定 (任意)
# routes = [
#   { pattern = "grammar.yourdomain.com/*", zone_name = "yourdomain.com" }
# ]