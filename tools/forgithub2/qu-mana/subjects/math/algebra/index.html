<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»£æ•°å•é¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</title>
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #1e40af;
            --accent-color: #60a5fa;
            --bg-color: #eff6ff;
            --text-color: #1f2937;
            --border-color: #bfdbfe;
            --hover-bg: #dbeafe;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }

        .button {
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .button:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .button-secondary {
            background: #6b7280;
        }

        .button-secondary:hover {
            background: #4b5563;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6b7280;
            font-size: 0.9rem;
        }

        .question-list {
            display: grid;
            gap: 15px;
        }

        .question-item {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s;
        }

        .question-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .question-type {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            color: white;
            background: var(--primary-color);
        }

        .question-actions {
            display: flex;
            gap: 10px;
        }

        .icon-button {
            padding: 8px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: var(--bg-color);
            color: var(--text-color);
            transition: all 0.2s;
        }

        .icon-button:hover {
            background: var(--hover-bg);
        }

        .question-text {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .question-meta {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .choice-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .choice-item input {
            flex: 1;
        }

        .choice-item button {
            padding: 5px 10px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .add-choice-btn {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 10px;
        }

        .math-preview {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            border-left: 4px solid var(--primary-color);
        }

        .difficulty-levels {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .difficulty-btn {
            padding: 8px 16px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            background: white;
            color: var(--text-color);
            transition: all 0.2s;
        }

        .difficulty-btn:hover {
            border-color: var(--primary-color);
        }

        .difficulty-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ ä»£æ•°å•é¡Œãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«</h1>
            <p>æ–¹ç¨‹å¼ã€ä¸ç­‰å¼ã€é–¢æ•°ã€å¤šé …å¼ãªã©ã®ä»£æ•°çš„å•é¡Œã‚’ä½œæˆãƒ»ç®¡ç†</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="total-questions">0</div>
                <div class="stat-label">ç·å•é¡Œæ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="equation-count">0</div>
                <div class="stat-label">æ–¹ç¨‹å¼</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="function-count">0</div>
                <div class="stat-label">é–¢æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="inequality-count">0</div>
                <div class="stat-label">ä¸ç­‰å¼</div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">æ–°è¦å•é¡Œä½œæˆ</h2>
            <form id="question-form" onsubmit="saveQuestion(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">å•é¡Œã‚¿ã‚¤ãƒ—</label>
                        <select class="form-select" id="question-type" required onchange="updateQuestionForm()">
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="linear-equation">ä¸€æ¬¡æ–¹ç¨‹å¼</option>
                            <option value="quadratic-equation">äºŒæ¬¡æ–¹ç¨‹å¼</option>
                            <option value="system-equation">é€£ç«‹æ–¹ç¨‹å¼</option>
                            <option value="inequality">ä¸ç­‰å¼</option>
                            <option value="function">é–¢æ•°</option>
                            <option value="polynomial">å¤šé …å¼</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">é›£æ˜“åº¦</label>
                        <div class="difficulty-levels">
                            <button type="button" class="difficulty-btn" onclick="setDifficulty('easy')">ç°¡å˜</button>
                            <button type="button" class="difficulty-btn" onclick="setDifficulty('medium')">æ™®é€š</button>
                            <button type="button" class="difficulty-btn" onclick="setDifficulty('hard')">é›£ã—ã„</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">å•é¡Œæ–‡</label>
                    <textarea class="form-textarea" id="question-text" required placeholder="å•é¡Œæ–‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚æ•°å¼ã¯LaTeXå½¢å¼ã§å…¥åŠ›ã§ãã¾ã™ã€‚"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">æ­£è§£</label>
                    <input type="text" class="form-input" id="correct-answer" required placeholder="æ­£è§£ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
                </div>

                <div id="choices-container" class="form-group" style="display: none;">
                    <label class="form-label">é¸æŠè‚¢</label>
                    <div id="choices-list">
                        <div class="choice-item">
                            <input type="text" placeholder="é¸æŠè‚¢ã‚’å…¥åŠ›">
                            <button type="button" onclick="removeChoice(this)">å‰Šé™¤</button>
                        </div>
                    </div>
                    <button type="button" class="add-choice-btn" onclick="addChoice()">é¸æŠè‚¢ã‚’è¿½åŠ </button>
                </div>

                <div class="form-group">
                    <label class="form-label">è§£èª¬</label>
                    <textarea class="form-textarea" id="explanation" placeholder="è§£èª¬ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä»»æ„ï¼‰"></textarea>
                </div>

                <div class="form-group">
                    <button type="submit" class="button">å•é¡Œã‚’ä¿å­˜</button>
                    <button type="button" class="button button-secondary" onclick="previewQuestion()">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
                </div>
            </form>
        </div>

        <div class="section">
            <h2 class="section-title">å•é¡Œä¸€è¦§</h2>
            <div id="questions-list" class="question-list">
                <!-- å•é¡Œãƒªã‚¹ãƒˆãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ -->
            </div>
        </div>
    </div>

    <script>
        let questions = [];
        let questionIdCounter = 1;
        let selectedDifficulty = '';

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadQuestions();
            updateStats();
            displayQuestions();
        });

        // è³ªå•ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
        function loadQuestions() {
            const saved = localStorage.getItem('math-algebra-questions');
            if (saved) {
                questions = JSON.parse(saved);
                questionIdCounter = Math.max(...questions.map(q => q.id), 0) + 1;
            } else {
                // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
                questions = [
                    {
                        id: 1,
                        type: 'linear-equation',
                        difficulty: 'easy',
                        text: 'æ¬¡ã®ä¸€æ¬¡æ–¹ç¨‹å¼ã‚’è§£ããªã•ã„ã€‚$2x + 5 = 13$',
                        answer: 'x = 4',
                        explanation: '2x + 5 = 13 ã‚ˆã‚Š 2x = 8ã€ã—ãŸãŒã£ã¦ x = 4',
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        type: 'quadratic-equation',
                        difficulty: 'medium',
                        text: 'æ¬¡ã®äºŒæ¬¡æ–¹ç¨‹å¼ã‚’è§£ããªã•ã„ã€‚$x^2 - 5x + 6 = 0$',
                        answer: 'x = 2, 3',
                        explanation: '(x - 2)(x - 3) = 0 ã‚ˆã‚Š x = 2, 3',
                        createdAt: new Date().toISOString()
                    }
                ];
                saveQuestions();
            }
        }

        // è³ªå•ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
        function saveQuestions() {
            localStorage.setItem('math-algebra-questions', JSON.stringify(questions));
        }

        // çµ±è¨ˆæƒ…å ±ã®æ›´æ–°
        function updateStats() {
            document.getElementById('total-questions').textContent = questions.length;
            document.getElementById('equation-count').textContent = questions.filter(q => q.type.includes('equation')).length;
            document.getElementById('function-count').textContent = questions.filter(q => q.type === 'function').length;
            document.getElementById('inequality-count').textContent = questions.filter(q => q.type === 'inequality').length;
        }

        // é›£æ˜“åº¦ã®è¨­å®š
        function setDifficulty(level) {
            selectedDifficulty = level;
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // è³ªå•ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸãƒ•ã‚©ãƒ¼ãƒ æ›´æ–°
        function updateQuestionForm() {
            const type = document.getElementById('question-type').value;
            const choicesContainer = document.getElementById('choices-container');
            
            // é¸æŠè‚¢ãŒå¿…è¦ãªã‚¿ã‚¤ãƒ—ã®å ´åˆã¯è¡¨ç¤º
            if (['linear-equation', 'quadratic-equation'].includes(type)) {
                choicesContainer.style.display = 'block';
            } else {
                choicesContainer.style.display = 'none';
            }
        }

        // é¸æŠè‚¢ã®è¿½åŠ 
        function addChoice() {
            const choicesList = document.getElementById('choices-list');
            const choiceItem = document.createElement('div');
            choiceItem.className = 'choice-item';
            choiceItem.innerHTML = `
                <input type="text" placeholder="é¸æŠè‚¢ã‚’å…¥åŠ›">
                <button type="button" onclick="removeChoice(this)">å‰Šé™¤</button>
            `;
            choicesList.appendChild(choiceItem);
        }

        // é¸æŠè‚¢ã®å‰Šé™¤
        function removeChoice(button) {
            button.parentElement.remove();
        }

        // è³ªå•ã®ä¿å­˜
        function saveQuestion(event) {
            event.preventDefault();
            
            if (!selectedDifficulty) {
                alert('é›£æ˜“åº¦ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }
            
            const question = {
                id: questionIdCounter++,
                type: document.getElementById('question-type').value,
                difficulty: selectedDifficulty,
                text: document.getElementById('question-text').value,
                answer: document.getElementById('correct-answer').value,
                explanation: document.getElementById('explanation').value,
                createdAt: new Date().toISOString()
            };
            
            // é¸æŠè‚¢ã®å‡¦ç†
            const choiceInputs = document.querySelectorAll('#choices-list input');
            if (choiceInputs.length > 0) {
                question.choices = Array.from(choiceInputs).map(input => input.value).filter(v => v.trim());
            }
            
            questions.push(question);
            saveQuestions();
            updateStats();
            displayQuestions();
            
            // ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('question-form').reset();
            selectedDifficulty = '';
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            showNotification('å•é¡Œã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
        }

        // å•é¡Œä¸€è¦§ã®è¡¨ç¤º
        function displayQuestions() {
            const container = document.getElementById('questions-list');
            
            container.innerHTML = questions.map(q => `
                <div class="question-item">
                    <div class="question-header">
                        <span class="question-type">${getTypeName(q.type)}</span>
                        <div class="question-actions">
                            <button class="icon-button" onclick="editQuestion(${q.id})" title="ç·¨é›†">âœï¸</button>
                            <button class="icon-button" onclick="deleteQuestion(${q.id})" title="å‰Šé™¤">ğŸ—‘ï¸</button>
                        </div>
                    </div>
                    <div class="question-text">${q.text}</div>
                    <div class="math-preview">æ­£è§£: ${q.answer}</div>
                    ${q.explanation ? `<div style="margin-top: 10px; padding: 10px; background: #f0f9ff; border-radius: 6px;">
                        <strong>è§£èª¬:</strong> ${q.explanation}
                    </div>` : ''}
                    <div class="question-meta">
                        <span>é›£æ˜“åº¦: ${getDifficultyName(q.difficulty)}</span>
                        <span>ä½œæˆæ—¥: ${new Date(q.createdAt).toLocaleDateString()}</span>
                    </div>
                </div>
            `).join('');
        }

        // è³ªå•ã®ç·¨é›†
        function editQuestion(id) {
            const question = questions.find(q => q.id === id);
            if (!question) return;
            
            document.getElementById('question-type').value = question.type;
            setDifficulty(question.difficulty);
            document.getElementById('question-text').value = question.text;
            document.getElementById('correct-answer').value = question.answer;
            document.getElementById('explanation').value = question.explanation || '';
            
            updateQuestionForm();
            
            // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ãƒ•ã‚©ãƒ¼ãƒ ã«ç§»å‹•
            document.querySelector('.section').scrollIntoView({ behavior: 'smooth' });
        }

        // è³ªå•ã®å‰Šé™¤
        function deleteQuestion(id) {
            if (confirm('ã“ã®å•é¡Œã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                questions = questions.filter(q => q.id !== id);
                saveQuestions();
                updateStats();
                displayQuestions();
                showNotification('å•é¡Œã‚’å‰Šé™¤ã—ã¾ã—ãŸ', 'success');
            }
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
        function previewQuestion() {
            const text = document.getElementById('question-text').value;
            const answer = document.getElementById('correct-answer').value;
            
            if (!text || !answer) {
                alert('å•é¡Œæ–‡ã¨æ­£è§£ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            alert('ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼\n\nå•é¡Œ: ' + text + '\n\næ­£è§£: ' + answer);
        }

        // é€šçŸ¥ã®è¡¨ç¤º
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 1000;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function getTypeName(type) {
            const names = {
                'linear-equation': 'ä¸€æ¬¡æ–¹ç¨‹å¼',
                'quadratic-equation': 'äºŒæ¬¡æ–¹ç¨‹å¼',
                'system-equation': 'é€£ç«‹æ–¹ç¨‹å¼',
                'inequality': 'ä¸ç­‰å¼',
                'function': 'é–¢æ•°',
                'polynomial': 'å¤šé …å¼'
            };
            return names[type] || type;
        }

        function getDifficultyName(difficulty) {
            const names = {
                easy: 'ç°¡å˜',
                medium: 'æ™®é€š',
                hard: 'é›£ã—ã„'
            };
            return names[difficulty] || difficulty;
        }
    </script>
</body>
</html>