<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¢ Math Manager - æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #1e40af;
            --accent-color: #60a5fa;
            --bg-color: #eff6ff;
            --text-color: #1f2937;
            --border-color: #bfdbfe;
            --hover-bg: #dbeafe;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Hiragino Sans', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        .header h1 {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .header p {
            font-size: 1.2rem;
            color: #6b7280;
        }

        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .module-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            display: block;
            cursor: pointer;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }

        .module-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .module-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .module-description {
            color: #6b7280;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .module-features {
            list-style: none;
        }

        .module-features li {
            padding: 5px 0;
            color: #6b7280;
            font-size: 0.9rem;
        }

        .module-features li:before {
            content: "âœ“ ";
            color: var(--primary-color);
            font-weight: bold;
        }

        /* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ¥ã‚«ãƒ©ãƒ¼ */
        .math1 { --module-color: #3b82f6; }
        .math2 { --module-color: #10b981; }
        .math3 { --module-color: #f59e0b; }
        .mathA { --module-color: #8b5cf6; }
        .mathB { --module-color: #ef4444; }
        .creator { --module-color: #06b6d4; }
        .manager { --module-color: #6b7280; }

        .module-card.math1 .module-icon,
        .module-card.math1 .module-title { color: #3b82f6; }
        
        .module-card.math2 .module-icon,
        .module-card.math2 .module-title { color: #10b981; }
        
        .module-card.math3 .module-icon,
        .module-card.math3 .module-title { color: #f59e0b; }
        
        .module-card.mathA .module-icon,
        .module-card.mathA .module-title { color: #8b5cf6; }
        
        .module-card.mathB .module-icon,
        .module-card.mathB .module-title { color: #ef4444; }
        
        .module-card.creator .module-icon,
        .module-card.creator .module-title { color: #06b6d4; }
        
        .module-card.manager .module-icon,
        .module-card.manager .module-title { color: #6b7280; }

        .stats-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-top: 40px;
        }

        .sample-section {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            text-align: center;
        }

        .sample-content h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .btn-sample {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            margin: 15px 10px;
            transition: all 0.3s ease;
        }

        .btn-sample:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6b7280;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .sample-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-size: 0.9rem;
            display: none;
        }

        .sample-message.success {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #bfdbfe;
            display: block;
        }

        .sample-message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            color: #6b7280;
            margin-top: 5px;
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            color: #6b7280;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* PWAæº–å‚™ */
        .pwa-info {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }

        .pwa-info h3 {
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .btn-sample {
                display: block;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¢ Math Manager</h1>
            <p>æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  - A1æŠãƒ»F1è‡ªç”±ãƒ»F2è¨˜è¿°å¯¾å¿œ</p>
        </div>

        <div class="pwa-info">
            <h3>ğŸ“± ã‚¹ãƒãƒ›å¯¾å¿œãƒ»PWA Ready</h3>
            <p>ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³ | å”åƒå•é¡Œä½œæˆ | è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ </p>
        </div>

        <div class="modules-grid">
            <a href="math1/" class="module-card math1">
                <div class="module-icon">ğŸ“</div>
                <h2 class="module-title">æ•°å­¦I</h2>
                <p class="module-description">åŸºç¤æ•°å­¦ã®å•é¡Œä½œæˆãƒ»ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>æ•°ã¨å¼ï¼ˆå› æ•°åˆ†è§£ãƒ»çµ¶å¯¾å€¤ï¼‰</li>
                    <li>é›†åˆã¨è«–ç†ï¼ˆå‘½é¡Œãƒ»è¨¼æ˜ï¼‰</li>
                    <li>äºŒæ¬¡é–¢æ•°ï¼ˆã‚°ãƒ©ãƒ•ãƒ»æœ€å€¤ï¼‰</li>
                    <li>å›³å½¢ã¨è¨ˆé‡ï¼ˆä¸‰è§’æ¯”ï¼‰</li>
                    <li>ãƒ‡ãƒ¼ã‚¿ã®åˆ†æï¼ˆçµ±è¨ˆï¼‰</li>
                </ul>
            </a>

            <a href="math2/" class="module-card math2">
                <div class="module-icon">ğŸ“Š</div>
                <h2 class="module-title">æ•°å­¦II</h2>
                <p class="module-description">ç™ºå±•æ•°å­¦ã®å•é¡Œä½œæˆãƒ»ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>å¼ã¨è¨¼æ˜ï¼ˆæ’ç­‰å¼ãƒ»ä¸ç­‰å¼ï¼‰</li>
                    <li>è¤‡ç´ æ•°ã¨æ–¹ç¨‹å¼</li>
                    <li>å›³å½¢ã¨æ–¹ç¨‹å¼ï¼ˆè»Œè·¡ãƒ»é ˜åŸŸï¼‰</li>
                    <li>ä¸‰è§’é–¢æ•°ï¼ˆåŠ æ³•å®šç†ï¼‰</li>
                    <li>æŒ‡æ•°ãƒ»å¯¾æ•°é–¢æ•°</li>
                </ul>
            </a>

            <a href="math3/" class="module-card math3">
                <div class="module-icon">âˆ«</div>
                <h2 class="module-title">æ•°å­¦III</h2>
                <p class="module-description">é«˜åº¦æ•°å­¦ã®å•é¡Œä½œæˆãƒ»ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>æ¥µé™ï¼ˆæ•°åˆ—ãƒ»é–¢æ•°ã®æ¥µé™ï¼‰</li>
                    <li>å¾®åˆ†æ³•ï¼ˆå°é–¢æ•°ãƒ»å¿œç”¨ï¼‰</li>
                    <li>ç©åˆ†æ³•ï¼ˆå®šç©åˆ†ãƒ»å¿œç”¨ï¼‰</li>
                    <li>è¤‡ç´ æ•°å¹³é¢</li>
                    <li>äºŒæ¬¡æ›²ç·š</li>
                </ul>
            </a>

            <a href="mathA/" class="module-card mathA">
                <div class="module-icon">ğŸ²</div>
                <h2 class="module-title">æ•°å­¦A</h2>
                <p class="module-description">å ´åˆã®æ•°ãƒ»ç¢ºç‡ãƒ»å›³å½¢ã®å•é¡Œç®¡ç†</p>
                <ul class="module-features">
                    <li>å ´åˆã®æ•°ã¨ç¢ºç‡</li>
                    <li>å›³å½¢ã®æ€§è³ªï¼ˆå¹³é¢ãƒ»ç©ºé–“ï¼‰</li>
                    <li>æ•´æ•°ã®æ€§è³ªï¼ˆç´„æ•°ãƒ»å€æ•°ï¼‰</li>
                    <li>A1æŠãƒ»F1è¨˜è¿°å¯¾å¿œ</li>
                </ul>
            </a>

            <a href="mathB/" class="module-card mathB">
                <div class="module-icon">ğŸ“ˆ</div>
                <h2 class="module-title">æ•°å­¦B</h2>
                <p class="module-description">æ•°åˆ—ãƒ»ãƒ™ã‚¯ãƒˆãƒ«ãƒ»çµ±è¨ˆã®å•é¡Œç®¡ç†</p>
                <ul class="module-features">
                    <li>æ•°åˆ—ï¼ˆç­‰å·®ãƒ»ç­‰æ¯”ãƒ»æ¼¸åŒ–å¼ï¼‰</li>
                    <li>ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆå¹³é¢ãƒ»ç©ºé–“ï¼‰</li>
                    <li>çµ±è¨ˆçš„ãªæ¨æ¸¬</li>
                    <li>è¤‡åˆå•é¡Œå¯¾å¿œ</li>
                </ul>
            </a>

            <a href="creator/" class="module-card creator">
                <div class="module-icon">âœ¨</div>
                <h2 class="module-title">å•é¡Œä½œæˆ</h2>
                <p class="module-description">å”åƒå•é¡Œä½œæˆã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>A1æŠãƒ»F1è‡ªç”±ãƒ»F2è¨˜è¿°</li>
                    <li>LaTeXæ•°å¼å¯¾å¿œ</li>
                    <li>3äººæ‰¿èªã‚·ã‚¹ãƒ†ãƒ </li>
                    <li>è©•ä¾¡ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½</li>
                </ul>
            </a>

            <a href="manager/" class="module-card manager">
                <div class="module-icon">ğŸ“‹</div>
                <h2 class="module-title">å•é¡Œç®¡ç†</h2>
                <p class="module-description">ç·åˆå•é¡Œç®¡ç†ãƒ»çµ±è¨ˆã‚·ã‚¹ãƒ†ãƒ </p>
                <ul class="module-features">
                    <li>å…¨å•é¡Œä¸€è¦§ãƒ»æ¤œç´¢</li>
                    <li>æ­£ç­”ç‡ãƒ»è©•ä¾¡çµ±è¨ˆ</li>
                    <li>D1ãƒ‡ãƒ¼ã‚¿ç®¡ç†</li>
                    <li>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆåˆ¶é™</li>
                </ul>
            </a>

            <a href="practice/" class="module-card" style="--module-color: #ec4899;">
                <div class="module-icon" style="color: #ec4899;">ğŸ¯</div>
                <h2 class="module-title" style="color: #ec4899;">å•é¡Œç·´ç¿’</h2>
                <p class="module-description">å®Ÿéš›ã«æ•°å­¦å•é¡Œã‚’è§£ã„ã¦å­¦ç¿’ä½“é¨“</p>
                <ul class="module-features">
                    <li>å…¨åˆ†é‡å¯¾å¿œç·´ç¿’</li>
                    <li>é›£æ˜“åº¦åˆ¥å‡ºé¡Œ</li>
                    <li>å³æ™‚æ¡ç‚¹ãƒ»è§£èª¬</li>
                    <li>å­¦ç¿’é€²æ—ç®¡ç†</li>
                </ul>
            </a>
        </div>

        <div class="stats-section">
            <h3 style="text-align: center; margin-bottom: 30px; color: var(--primary-color);">ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number" id="totalQuestions">0</div>
                    <div class="stat-label">ç·å•é¡Œæ•°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalModules">5</div>
                    <div class="stat-label">æ•°å­¦åˆ†é‡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalFormats">3</div>
                    <div class="stat-label">å•é¡Œå½¢å¼</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="localStorage">D1</div>
                    <div class="stat-label">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="approvalSystem">3+</div>
                    <div class="stat-label">æ‰¿èªã‚·ã‚¹ãƒ†ãƒ </div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="pwReady">âœ“</div>
                    <div class="stat-label">PWAå¯¾å¿œ</div>
                </div>
            </div>
        </div>

        <div class="sample-section">
            <div class="sample-content">
                <h3>ğŸ² ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
                <p>æ•°å­¦å•é¡Œã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã€ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½“é¨“ã§ãã¾ã™ã€‚</p>
                <div>
                    <button class="btn-sample" onclick="loadSampleData()">ğŸ“¥ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿</button>
                    <button class="btn-sample btn-secondary" onclick="clearAllData()">ğŸ—‘ï¸ å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢</button>
                    <button class="btn-sample" onclick="exportData()">ğŸ“¤ ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                </div>
                <div id="sample-message" class="sample-message"></div>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2024 Math Manager - æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ . PWA Ready.</p>
        </div>
    </div>

    <script>
        // æ•°å­¦å•é¡Œç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ©ã‚¹
        class MathManager {
            constructor() {
                this.modules = ['math1', 'math2', 'math3', 'mathA', 'mathB'];
                this.init();
            }

            init() {
                this.updateStats();
                this.showWelcomeMessage();
            }

            // çµ±è¨ˆæƒ…å ±ã®æ›´æ–°
            updateStats() {
                let totalQuestions = 0;
                
                this.modules.forEach(module => {
                    const questions = JSON.parse(localStorage.getItem(module + 'Questions') || '[]');
                    totalQuestions += questions.length;
                });
                
                document.getElementById('totalQuestions').textContent = totalQuestions;
            }

            // é€šçŸ¥è¡¨ç¤º
            showNotification(message, duration = 3000) {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, duration);
            }

            // ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            showWelcomeMessage() {
                setTimeout(() => {
                    this.showNotification('ğŸ”¢ Math Manager ã¸ã‚ˆã†ã“ãï¼');
                }, 1000);
            }

            // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
            showMessage(message, type) {
                const messageElement = document.getElementById('sample-message');
                messageElement.textContent = message;
                messageElement.className = `sample-message ${type}`;
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿é–¢æ•°
        function loadSampleData() {
            try {
                const sampleData = {
                    math1Questions: [
                        {
                            id: 'math1_001',
                            type: 'A1',
                            title: 'äºŒæ¬¡é–¢æ•°ã®æœ€å¤§å€¤',
                            question: 'f(x) = -xÂ² + 4x + 1 ã®æœ€å¤§å€¤ã¯ï¼Ÿ',
                            choices: ['3', '4', '5', '6'],
                            correct: 2,
                            difficulty: 'B',
                            field: 'äºŒæ¬¡é–¢æ•°',
                            explanation: 'f(x) = -(x-2)Â² + 5 ã‚ˆã‚Šã€æœ€å¤§å€¤ã¯5',
                            created: new Date().toISOString(),
                            approvals: 3,
                            rating: 4.2
                        },
                        {
                            id: 'math1_002',
                            type: 'F1',
                            title: 'çµ¶å¯¾å€¤æ–¹ç¨‹å¼',
                            question: '|2x - 3| = 5 ã‚’æº€ãŸã™xã®å€¤ã‚’ã™ã¹ã¦æ±‚ã‚ã‚ˆã€‚',
                            answer: 'x = 4, -1',
                            difficulty: 'A',
                            field: 'æ•°ã¨å¼',
                            explanation: '2x-3=5 ã¾ãŸã¯ 2x-3=-5 ã‚’è§£ã',
                            created: new Date().toISOString(),
                            approvals: 3,
                            rating: 3.8
                        }
                    ],
                    mathAQuestions: [
                        {
                            id: 'mathA_001',
                            type: 'A1',
                            title: 'ç¢ºç‡ã®åŸºæœ¬',
                            question: 'ã‚µã‚¤ã‚³ãƒ­ã‚’2å›æŠ•ã’ã¦ã€å’ŒãŒ7ã«ãªã‚‹ç¢ºç‡ã¯ï¼Ÿ',
                            choices: ['1/6', '1/5', '1/4', '1/3'],
                            correct: 0,
                            difficulty: 'A',
                            field: 'å ´åˆã®æ•°ã¨ç¢ºç‡',
                            explanation: '(1,6),(2,5),(3,4),(4,3),(5,2),(6,1)ã®6é€šã‚Š / 36é€šã‚Š = 1/6',
                            created: new Date().toISOString(),
                            approvals: 4,
                            rating: 4.5
                        }
                    ],
                    math3Questions: [
                        {
                            id: 'math3_001',
                            type: 'F2',
                            title: 'å®šç©åˆ†ã®è¨ˆç®—',
                            question: 'âˆ«[0â†’1] xÂ²dx ã‚’è¨ˆç®—ã›ã‚ˆã€‚',
                            answer: '1/3',
                            difficulty: 'B',
                            field: 'ç©åˆ†æ³•',
                            explanation: '[xÂ³/3]â‚€Â¹ = 1/3 - 0 = 1/3',
                            created: new Date().toISOString(),
                            approvals: 5,
                            rating: 4.0
                        }
                    ]
                };

                // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                Object.keys(sampleData).forEach(key => {
                    localStorage.setItem(key, JSON.stringify(sampleData[key]));
                });

                window.mathManager.updateStats();
                window.mathManager.showMessage(
                    'âœ… ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼æ•°å­¦I: 2å•ã€æ•°å­¦A: 1å•ã€æ•°å­¦III: 1å•',
                    'success'
                );
                window.mathManager.showNotification('ğŸ“Š ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å®Œäº†');

            } catch (error) {
                window.mathManager.showMessage('âŒ ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
            }
        }

        // å…¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
        function clearAllData() {
            if (confirm('ã™ã¹ã¦ã®å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ\nã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
                const modules = ['math1', 'math2', 'math3', 'mathA', 'mathB'];
                modules.forEach(module => {
                    localStorage.removeItem(module + 'Questions');
                });
                
                window.mathManager.updateStats();
                window.mathManager.showMessage('ğŸ—‘ï¸ ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚', 'success');
                window.mathManager.showNotification('ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢å®Œäº†');
            }
        }

        // ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆåˆ¶é™ä»˜ãï¼‰
        function exportData() {
            try {
                const allData = {};
                const modules = ['math1', 'math2', 'math3', 'mathA', 'mathB'];
                
                modules.forEach(module => {
                    const questions = JSON.parse(localStorage.getItem(module + 'Questions') || '[]');
                    if (questions.length > 0) {
                        // ãƒ‡ãƒ¼ã‚¿åˆ¶é™ï¼ˆå€‹äººæƒ…å ±å‰Šé™¤ã€æ‰¿èªæ¸ˆã¿ã®ã¿ï¼‰
                        allData[module] = questions
                            .filter(q => q.approvals >= 3)
                            .map(q => ({
                                id: q.id,
                                type: q.type,
                                title: q.title,
                                question: q.question,
                                difficulty: q.difficulty,
                                field: q.field,
                                rating: q.rating
                            }));
                    }
                });

                const exportData = {
                    exported: new Date().toISOString(),
                    version: '1.0',
                    restriction: 'educational_use_only',
                    data: allData
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], {
                    type: 'application/json'
                });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `math-questions-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                window.mathManager.showMessage('ğŸ“¤ æ‰¿èªæ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼ˆæ•™è‚²åˆ©ç”¨é™å®šï¼‰', 'success');

            } catch (error) {
                window.mathManager.showMessage('âŒ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'error');
            }
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            window.mathManager = new MathManager();
        });
    </script>
</body>
</html>